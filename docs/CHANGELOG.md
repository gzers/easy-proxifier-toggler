# 更新日志 (CHANGELOG)

所有对 Proxifier Toggler 的重要更改都将记录在此文件中。

## [2.3.1] - 2026-01-18

### 修复
- **线程模型重构**: 彻底重构了多线程逻辑，解决了 `RuntimeError: main thread is not in main loop` 错误。
- **稳定性提升**: 修复了多次打开/关闭设置窗口导致的白屏或崩溃问题。
- **资源管理**: 优化了 Tkinter 变量和组件的生命周期管理，防止资源泄露。

## [2.3.0] - 2026-01-18

### 新增
- **Win11 Fluent UI 视觉设计**: 全面升级界面美学，采用 Windows 11 风格的圆角、阴影和层级感设计。
- **现代化交互**: 增加了精细的悬停动画、按下效果以及平滑过渡。
- **UI 布局优化**: 重定义了设置界面的卡片式布局，增加内边距和间距，使信息展示更清晰。
- **自定义滚动条**: 实现了极简现代化的 slim 滚动条。
- **圆角控件**: 对输入框、按钮、卡片等所有交互组件进行了微圆角处理 (8px/12px)。

### 修复
- 修复了设置界面各部分高度不均的问题。
- 优化了主界面在不同缩放下的布局表现。

## [2.2.0] - 2026-01-18

### 重构
- **GUI 模块化**: 对主控面板进行了深度重构，将界面拆分为独立的 `widgets` 组件（状态面板、配置面板、启动面板）。
- **代码优化**: 显著降低了单个文件的代码长度，提高了配置管理与 UI 之间的解耦程度。
- **状态监控**: 优化了异步监控线程，确保在关闭窗口时能平滑停止。

### 新增
- **主控台功能**: 在设置界面集成了开关切换功能，无需右键托盘即可完成操作。
- **重置功能**: 增加了配置重置按钮。

## [2.1.1] - 2026-01-18

### 新增
- **资源目录**: 增加了 `assets/` 文件夹用于存放外部资源。
- **自定义图标支持**: 托盘和设置窗口现在优先从 `assets/` 目录加载图标（支持 PNG 和 ICO）。
- **全新视觉设计**: 采用了极简主义的蓝色渐变 "P" 图标，并完整去除了背景实现透明化，视觉效果更协调。

### 修复
- 修复了图标在某些分辨率下边缘不平滑的问题。

## [2.1.0] - 2026-01-18

### 新增
- **开机自动启动**: 在设置界面可开启/关闭 Windows 开机自启动。
- **启动模式设置**: 可配置启动时是最小化到托盘还是直接打开设置界面。
- **版本号显示**: 设置界面底部和托盘图标提示文字中现在会显示版本号。
- **窗口管理**: 设置窗口现在会始终在屏幕中央显示。
- **便捷启动脚本**: 新增 `start_admin.bat`，可自动请求管理员权限并启动程序。

### 修改
- **权限管理简化**: 移除了复杂的交互式权限选择，改为自动请求 UAC 提权，并支持 `--dev` 开发模式跳过检查。
- **UI 优化**: 调整了设置窗口布局，增加了分隔线和分组。
- **项目结构**: 彻底完成工程化目录重构，分为 `src/core`, `src/gui`, `src/config`, `src/utils`。

### 修复
- 修复了设置窗口可能会在屏幕角落显示的偏移问题。
- 修复了配置保存时可能无法同步开机启动状态的问题。

---

## [2.0.0] - 2026-01-18

### 重构
- **工程化结构**: 将单文件脚本重构为模块化项目。
- **统一入口**: 引入 `run.py` 启动脚本。
- **配置系统**: 引入 `config_manager` 实现配置持久化。
- **GUI 设置**: 引入独立线程的设置窗口。

---

## [1.0.0] - 2026-01-17

### 初始版本
- 实现 Proxifier 服务和进程的基本切换逻辑。
- 系统托盘菜单控制。
- 简单的状态检查。
